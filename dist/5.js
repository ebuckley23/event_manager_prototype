(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{354:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);let a=null;function s(e,t){return async function(e,t={}){const{headers:n={},body:i=null}=t;a&&(n.Authorization=`Bearer ${a}`),i&&(t.body=JSON.stringify(i));const s=new Request(e,r({},t,{headers:new Headers(r({"Content-Type":"application/json"},n))}));return fetch(s).then(e=>{if(!e.ok)throw Error(e.statusText);return e})}(`/api${e}`,t)}"undefined"!=typeof Storage&&(a=localStorage.authToken);var o=n(23);n.d(t,"getEvents",function(){return c}),n.d(t,"getEvent",function(){return l}),n.d(t,"addRegistrant",function(){return p}),n.d(t,"getEventRegistrants",function(){return d}),n.d(t,"toggleResultDialog",function(){return u}),n.d(t,"signInRegistrant",function(){return m}),n.d(t,"setWinnerHistory",function(){return h});const c=()=>({type:o.c,payload:s("/events").then(e=>e.json())}),l=e=>({type:o.b,payload:s(`/events/${e}`).then(e=>e.json())}),p=(e,t)=>({type:o.a,payload:s(`/events/${e}/registrant`,{method:"POST",body:t}).then()}),d=e=>({type:o.d,payload:s(`/events/${e}/registrant`).then(e=>e.json())}),u=()=>({type:o.g}),m=(e,t,n)=>({type:o.f,meta:{index:n},payload:s(`/events/${e}/registrant/${t}/signIn`,{method:"PUT"}).then(e=>({}))}),h=(e,t)=>({type:o.e,payload:{registrant:e,item:t}})},428:function(e,t,n){var r=n(429);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(431)(r,i);r.locals&&(e.exports=r.locals)},429:function(e,t,n){(e.exports=n(430)(!1)).push([e.i,".generateBtn-appear {\n  opacity: 0.01; }\n\n.generateBtn-appear.generateBtn-appear-active {\n  opacity: 1;\n  transition: opacity 1s ease-in; }\n\n.winnerField-appear {\n  opacity: 0.01; }\n\n.winnerField-appear.winnerField-appear-active {\n  opacity: 1;\n  transition: opacity 2s ease-in; }\n\n.winnerHistory-appear {\n  opacity: 0.01; }\n\n.winnerHistory-appear.winnerHistory-appear-active {\n  opacity: 1;\n  transition: opacity 2s ease-in; }\n\n.winnerField-enter {\n  opacity: 0.01; }\n\n.winnerField-enter.winnerField-enter-active {\n  opacity: 1;\n  transition: opacity 500ms ease-in; }\n\n.winnerField-leave {\n  opacity: 1; }\n\n.winnerField-leave.winnerField-leave-active {\n  opacity: 0.01;\n  transition: opacity 300ms ease-in; }\n",""])},437:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(44),s=n(43),o=n(21),c=n(384),l=n(354),p=n(40),d=n.n(p),u=n(91),m=n.n(u),h=({onStart:e,onReset:t,finding_winner:n})=>i.a.createElement(m.a,{container:!0,spacing:8,direction:"row",justify:"center",style:{padding:"2em"}},i.a.createElement(m.a,{item:!0},i.a.createElement(d.a,{color:"primary",style:{width:"7em",height:"7em",borderRadius:"50%"},onClick:e,variant:"contained"},"Start")),n&&i.a.createElement(m.a,{item:!0},i.a.createElement(d.a,{color:"secondary",style:{width:"7em",height:"7em",borderRadius:"50%"},onClick:t,variant:"contained"},"Stop"))),y=n(158),w=n.n(y),g=n(142),f=n.n(g),v=n(35);class b extends i.a.PureComponent{constructor(...e){var t;return t=super(...e),this.state={emails:[],winners_email:""},this.tick=(()=>{const{finding_winner:e,setWinner:t}=this.props;if(e){const e=this.state.registrants.length,n=Math.floor(Math.random()*e,0);t(this.state.registrants[n])}}),t}componentDidMount(){const{registrants:e}=this.props;this.setState({registrants:e});const t=setInterval(this.tick,1e3);this.setState({timer:t})}render(){const{finding_winner:e,award_item:t,winner:n}=this.props;return i.a.createElement("div",null,i.a.createElement(m.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{padding:"2em"}},!e&&n.email&&i.a.createElement(f.a,{label:n.email,color:"secondary",variant:"outlined"})),e&&i.a.createElement(v.l,{align:"center",component:"h5",variant:"h5"},`Searching for a winner for ${t}`),i.a.createElement(m.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{padding:"1.5em"}},e&&i.a.createElement(w.a,{style:{height:"1.5em",width:"50%"}}),e&&i.a.createElement(w.a,{style:{height:"1.5em",width:"50%"},color:"secondary",variant:"query"})))}}var E=n(398),S=n.n(E);const _=["Name","Email","Award"];var O=({award_history:e})=>{const t=e.map(e=>[`${e.registrant.name.firstName} ${e.registrant.name.lastName}`,e.registrant.email,e.item]);return i.a.createElement(S.a,{title:"Previous Winners",data:t,columns:_,options:{filterType:"checkbox"}})};n(428);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=Object(a.a)(Object(s.b)(e=>({events:e.events,award_history:e.events.award_history}),e=>({actions:Object(o.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}({},l),e)}))(class extends i.a.PureComponent{constructor(...e){var t;return t=super(...e),this.state={award_item:"",counter:0,finding_winner:!1,winner:""},this.handleStart=(()=>{const e=this.state.award_item||prompt("Enter prize");e?this.setState({award_item:e,finding_winner:!0}):alert("no award specified")}),this.handleStop=(()=>{const{actions:e}=this.props;this.setState({finding_winner:!1}),e.setWinnerHistory(this.state.winner,this.state.award_item),this.setState({award_item:""})}),this.handleWinner=(e=>{this.setState({winner:e})}),t}componentDidMount(){const{match:e={},actions:t}=this.props,{params:n={}}=e,{eventId:r=""}=n;t.getEventRegistrants(r)}render(){const{events:e}=this.props,{award_creator:t,award_winner_email:n}=e,{registrants:r=[]}=t,a=r.reduce((e,t)=>{if(!t.signedIn)return e;const{registrant:n}=t;return e.concat(n)},[]);return i.a.createElement("div",null,i.a.createElement(c.CSSTransitionGroup,{transitionName:"generateBtn",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},i.a.createElement(h,{finding_winner:this.state.finding_winner,onStart:this.handleStart,onReset:this.handleStop})),!!a.length&&i.a.createElement(c.CSSTransitionGroup,{transitionName:"winnerField",transitionAppear:!0,transitionAppearTimeout:2e3,transitionEnter:!1,transitionLeave:!1},i.a.createElement(b,{winner:this.state.winner,setWinner:this.handleWinner,finding_winner:this.state.finding_winner,registrants:a,award_item:this.state.award_item})),i.a.createElement(c.CSSTransitionGroup,{transitionName:"winnerHistory",transitionAppear:!0,transitionAppearTimeout:2e3,transitionEnter:!1,transitionLeave:!1},i.a.createElement(O,{award_history:this.props.award_history})))}}))}}]);